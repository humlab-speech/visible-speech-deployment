# Air-gapping the web UI (fonts and assets)

Goal: make the VISP web UI not depend on external CDNs (Google Fonts) at runtime.

## Quick Setup

```bash
# Download fonts (requires internet)
./scripts/download-fonts.sh

# Rebuild Apache image (fonts will be included automatically)
podman build -t visp-apache -f docker/apache/Dockerfile .
```

## Manual Steps (if script fails)

1. Prepare a local `webclient/dist/` build and place it in `external/webclient/dist/` in the repo (so Docker build can use it).
2. Download the woff2 (or woff) font files referenced by the webclient into `external/webclient/fonts/` (e.g., `saira-semi-condensed-300.woff2`).
3. Add a `external/webclient/fonts.css` file that provides `@font-face` rules pointing to `assets/fonts/<file>` (see example below).
4. Rebuild `visp-apache` image (the Dockerfile will copy fonts into `/var/www/html/assets/fonts/` and link `assets/fonts.css` into `index.html`).

## Fonts Used by Webclient

- **Saira Semi Condensed** (weight 300) - main UI font
- **Source Sans Pro** (regular) - secondary font

Get fresh URLs from https://fonts.google.com if the download script fails.

Example `fonts.css` (generated by `scripts/download-fonts.sh`):

```css
@font-face {
  font-family: 'Saira Semi Condensed';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url('assets/fonts/saira-semi-condensed-300.woff2') format('woff2');
}

@font-face {
  font-family: 'Source Sans Pro';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('assets/fonts/source-sans-pro-regular.woff2') format('woff2');
}
```

Notes:
- The Dockerfile will strip @import lines that reference `https://fonts.googleapis.com` from `main.js` when `fonts/` is present, to avoid runtime requests.
- Font files are `.gitignored` to avoid copyright issues - run `scripts/download-fonts.sh` on each build machine.
- If you do not want to include a full `dist/`, the Dockerfile will attempt to build the webclient inside the image (requires network) when only source is provided.
